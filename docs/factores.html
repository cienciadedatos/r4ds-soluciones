<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>15 Factores | R para Ciencia de Datos: Soluciones de los ejercicios</title>
  <meta name="description" content="Propuestas de soluciones para los ejercicios del libro R para Ciencia de Datos" />
  <meta name="generator" content="bookdown 0.24 and GitBook 2.6.7" />

  <meta property="og:title" content="15 Factores | R para Ciencia de Datos: Soluciones de los ejercicios" />
  <meta property="og:type" content="book" />
  <meta property="og:url" content="http://cienciadedatos.github.io/r4ds-soluciones" />
  <meta property="og:image" content="http://cienciadedatos.github.io/r4ds-soluciones/cover.png" />
  <meta property="og:description" content="Propuestas de soluciones para los ejercicios del libro R para Ciencia de Datos" />
  <meta name="github-repo" content="cienciadedatos/r4ds-soluciones" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="15 Factores | R para Ciencia de Datos: Soluciones de los ejercicios" />
  
  <meta name="twitter:description" content="Propuestas de soluciones para los ejercicios del libro R para Ciencia de Datos" />
  <meta name="twitter:image" content="http://cienciadedatos.github.io/r4ds-soluciones/cover.png" />

<meta name="author" content="Riva Quiroga" />
<meta name="author" content="Mauricio ‘Pachá’ Vargas" />
<meta name="author" content="Gabriela Sandoval" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="cadenas-de-caracteres.html"/>
<link rel="next" href="horas-y-fechas.html"/>
<script src="libs/header-attrs-2.11/header-attrs.js"></script>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>
<script src="libs/htmlwidgets-1.5.4/htmlwidgets.js"></script>
<link href="libs/str_view-0.1.0/str_view.css" rel="stylesheet" />
<script src="libs/str_view-binding-1.4.0/str_view.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><strong><a href="./">Soluciones R para Ciencia de Datos</a></strong></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Bienvenida</a></li>
<li class="chapter" data-level="1" data-path="introducción.html"><a href="introducción.html"><i class="fa fa-check"></i><b>1</b> Introducción</a></li>
<li class="part"><span><b>I Explorar</b></span></li>
<li class="chapter" data-level="2" data-path="introducción-1.html"><a href="introducción-1.html"><i class="fa fa-check"></i><b>2</b> Introducción</a></li>
<li class="chapter" data-level="3" data-path="visualización-de-datos.html"><a href="visualización-de-datos.html"><i class="fa fa-check"></i><b>3</b> Visualización de datos</a>
<ul>
<li class="chapter" data-level="3.1" data-path="visualización-de-datos.html"><a href="visualización-de-datos.html#introducción-2"><i class="fa fa-check"></i><b>3.1</b> Introducción</a></li>
<li class="chapter" data-level="" data-path="visualización-de-datos.html"><a href="visualización-de-datos.html#primeros-pasos"><i class="fa fa-check"></i>3.2 Primeros pasos</a>
<ul>
<li class="chapter" data-level="" data-path="visualización-de-datos.html"><a href="visualización-de-datos.html#ejercicios-324"><i class="fa fa-check"></i>3.2.4 Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="visualización-de-datos.html"><a href="visualización-de-datos.html#mapeos-esteticos"><i class="fa fa-check"></i>3.3 Mapeos estéticos</a>
<ul>
<li class="chapter" data-level="" data-path="visualización-de-datos.html"><a href="visualización-de-datos.html#ejercicios-331"><i class="fa fa-check"></i>3.3.1 Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="visualización-de-datos.html"><a href="visualización-de-datos.html#separar-facetas"><i class="fa fa-check"></i>3.5 Separar en facetas</a>
<ul>
<li class="chapter" data-level="" data-path="visualización-de-datos.html"><a href="visualización-de-datos.html#ejercicios-351"><i class="fa fa-check"></i>3.5.1 Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="visualización-de-datos.html"><a href="visualización-de-datos.html#objetos-geometricos"><i class="fa fa-check"></i>3.6 Objetos geométricos</a>
<ul>
<li class="chapter" data-level="" data-path="visualización-de-datos.html"><a href="visualización-de-datos.html#ejercicios-361"><i class="fa fa-check"></i>3.6.1 Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="visualización-de-datos.html"><a href="visualización-de-datos.html#transformaciones-estadisticas"><i class="fa fa-check"></i>3.7 Transformaciones estadísticas</a>
<ul>
<li class="chapter" data-level="" data-path="visualización-de-datos.html"><a href="visualización-de-datos.html#ejercicios-371"><i class="fa fa-check"></i>3.7.1 Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="visualización-de-datos.html"><a href="visualización-de-datos.html#ajustes-posicion"><i class="fa fa-check"></i>3.8 Ajustes de posición</a>
<ul>
<li class="chapter" data-level="" data-path="visualización-de-datos.html"><a href="visualización-de-datos.html#ejercicios-381"><i class="fa fa-check"></i>3.8.1 Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="visualización-de-datos.html"><a href="visualización-de-datos.html#sistemas-coordenadas"><i class="fa fa-check"></i>3.9 Sistemas de coordenadas</a>
<ul>
<li class="chapter" data-level="" data-path="visualización-de-datos.html"><a href="visualización-de-datos.html#ejercicios-391"><i class="fa fa-check"></i>3.9.1 Ejercicios</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="flujo-de-trabajo-conocimientos-básicos.html"><a href="flujo-de-trabajo-conocimientos-básicos.html"><i class="fa fa-check"></i><b>4</b> Flujo de trabajo: conocimientos básicos</a>
<ul>
<li class="chapter" data-level="" data-path="flujo-de-trabajo-conocimientos-básicos.html"><a href="flujo-de-trabajo-conocimientos-básicos.html#ejercicios-41"><i class="fa fa-check"></i>4.4 Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="transform.html"><a href="transform.html"><i class="fa fa-check"></i><b>5</b> Transformación de datos</a>
<ul>
<li class="chapter" data-level="5.1" data-path="transform.html"><a href="transform.html#introducción-3"><i class="fa fa-check"></i><b>5.1</b> Introducción</a></li>
<li><a href="transform.html#filter">5.2 Filtrar filas con <code>filter()</code></a>
<ul>
<li class="chapter" data-level="" data-path="transform.html"><a href="transform.html#ejercicios-524"><i class="fa fa-check"></i>5.2.4 Ejercicios</a></li>
</ul></li>
<li><a href="transform.html#arrange">5.3 Reordenar las filas con <code>arrange()</code></a>
<ul>
<li class="chapter" data-level="" data-path="transform.html"><a href="transform.html#ejercicios-531"><i class="fa fa-check"></i>5.3.1 Ejercicios</a></li>
</ul></li>
<li><a href="transform.html#select">5.4 Seleccionar columnas con <code>select()</code></a>
<ul>
<li class="chapter" data-level="" data-path="transform.html"><a href="transform.html#ejercicios-541"><i class="fa fa-check"></i>5.4.1 Ejercicios</a></li>
</ul></li>
<li><a href="transform.html#mutate">5.5 Añadir nuevas variables con <code>mutate()</code></a>
<ul>
<li class="chapter" data-level="" data-path="transform.html"><a href="transform.html#ejercicios-552"><i class="fa fa-check"></i>5.5.2 Ejercicios</a></li>
</ul></li>
<li><a href="transform.html#sumamarise">5.6 Resúmenes agrupados con <code>summarise()</code></a>
<ul>
<li class="chapter" data-level="" data-path="transform.html"><a href="transform.html#ejercicios-567"><i class="fa fa-check"></i>5.6.7 Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="transform.html"><a href="transform.html#mutate-filter"><i class="fa fa-check"></i>5.7 Transformaciones agrupadas (y filtros)</a>
<ul>
<li class="chapter" data-level="" data-path="transform.html"><a href="transform.html#ejercicios-571"><i class="fa fa-check"></i>5.7.1 Ejercicios</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="flujo-de-trabajo-scripts.html"><a href="flujo-de-trabajo-scripts.html"><i class="fa fa-check"></i><b>6</b> Flujo de trabajo: <em>Scripts</em></a>
<ul>
<li class="chapter" data-level="" data-path="flujo-de-trabajo-scripts.html"><a href="flujo-de-trabajo-scripts.html#ejercicios-63"><i class="fa fa-check"></i>6.3 Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="análisis-exploratorio-de-datos-eda.html"><a href="análisis-exploratorio-de-datos-eda.html"><i class="fa fa-check"></i><b>7</b> Análisis exploratorio de datos (<em>EDA</em>)</a>
<ul>
<li class="chapter" data-level="7.1" data-path="análisis-exploratorio-de-datos-eda.html"><a href="análisis-exploratorio-de-datos-eda.html#introducción-4"><i class="fa fa-check"></i><b>7.1</b> Introducción</a></li>
<li class="chapter" data-level="" data-path="análisis-exploratorio-de-datos-eda.html"><a href="análisis-exploratorio-de-datos-eda.html#preguntas"><i class="fa fa-check"></i>7.3 Variación</a>
<ul>
<li class="chapter" data-level="" data-path="análisis-exploratorio-de-datos-eda.html"><a href="análisis-exploratorio-de-datos-eda.html#ejercicios-734"><i class="fa fa-check"></i>7.3.4 Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="análisis-exploratorio-de-datos-eda.html"><a href="análisis-exploratorio-de-datos-eda.html#valores-faltantes"><i class="fa fa-check"></i>7.4 Valores faltantes</a>
<ul>
<li class="chapter" data-level="" data-path="análisis-exploratorio-de-datos-eda.html"><a href="análisis-exploratorio-de-datos-eda.html#ejercicios-741"><i class="fa fa-check"></i>7.4.1 Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="análisis-exploratorio-de-datos-eda.html"><a href="análisis-exploratorio-de-datos-eda.html#covariacion"><i class="fa fa-check"></i>7.5 Covariación</a>
<ul>
<li class="chapter" data-level="" data-path="análisis-exploratorio-de-datos-eda.html"><a href="análisis-exploratorio-de-datos-eda.html#categorica-continua"><i class="fa fa-check"></i>7.5.1 Una variable categórica y otra continua</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="análisis-exploratorio-de-datos-eda.html"><a href="análisis-exploratorio-de-datos-eda.html#categorica"><i class="fa fa-check"></i>7.5.2 Dos variables categóricas</a>
<ul>
<li class="chapter" data-level="" data-path="análisis-exploratorio-de-datos-eda.html"><a href="análisis-exploratorio-de-datos-eda.html#ejercicios-7521"><i class="fa fa-check"></i>7.5.2.1 Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="análisis-exploratorio-de-datos-eda.html"><a href="análisis-exploratorio-de-datos-eda.html#continuas"><i class="fa fa-check"></i>7.5.3 Dos variables continuas</a>
<ul>
<li class="chapter" data-level="" data-path="análisis-exploratorio-de-datos-eda.html"><a href="análisis-exploratorio-de-datos-eda.html#ejercicios-7532"><i class="fa fa-check"></i>7.5.3.1 Ejercicios</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="workflow-projects.html"><a href="workflow-projects.html"><i class="fa fa-check"></i><b>8</b> Workflow: projects</a></li>
<li class="part"><span><b>II Manejar o domar datos</b></span></li>
<li class="chapter" data-level="9" data-path="introducción-5.html"><a href="introducción-5.html"><i class="fa fa-check"></i><b>9</b> Introducción</a></li>
<li class="chapter" data-level="10" data-path="tibbles.html"><a href="tibbles.html"><i class="fa fa-check"></i><b>10</b> Tibbles</a>
<ul>
<li class="chapter" data-level="" data-path="tibbles.html"><a href="tibbles.html#ejercicios-105"><i class="fa fa-check"></i>10.5 Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="importación-de-datos.html"><a href="importación-de-datos.html"><i class="fa fa-check"></i><b>11</b> Importación de datos</a>
<ul>
<li class="chapter" data-level="" data-path="importación-de-datos.html"><a href="importación-de-datos.html#comenzando"><i class="fa fa-check"></i>11.2 Comenzando</a>
<ul>
<li class="chapter" data-level="" data-path="importación-de-datos.html"><a href="importación-de-datos.html#ejercicios-1122"><i class="fa fa-check"></i>11.2.2 Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="importación-de-datos.html"><a href="importación-de-datos.html#segmentar-vector"><i class="fa fa-check"></i>11.3 Segmentar un vector</a>
<ul>
<li class="chapter" data-level="" data-path="importación-de-datos.html"><a href="importación-de-datos.html#ejercicios-1135"><i class="fa fa-check"></i>11.3.5 Ejercicios</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="12" data-path="datos-ordenados.html"><a href="datos-ordenados.html"><i class="fa fa-check"></i><b>12</b> Datos ordenados</a>
<ul>
<li class="chapter" data-level="" data-path="datos-ordenados.html"><a href="datos-ordenados.html#datos-ordenados122"><i class="fa fa-check"></i>12.2 Datos ordenados</a>
<ul>
<li class="chapter" data-level="" data-path="datos-ordenados.html"><a href="datos-ordenados.html#ejercicios-1221"><i class="fa fa-check"></i>12.2.1 Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="datos-ordenados.html"><a href="datos-ordenados.html#pivotar"><i class="fa fa-check"></i>12.3 Pivotar</a>
<ul>
<li class="chapter" data-level="" data-path="datos-ordenados.html"><a href="datos-ordenados.html#ejercicios-1233"><i class="fa fa-check"></i>12.3.3 Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="datos-ordenados.html"><a href="datos-ordenados.html#separar-unir"><i class="fa fa-check"></i>12.4 Separar y unir</a>
<ul>
<li class="chapter" data-level="" data-path="datos-ordenados.html"><a href="datos-ordenados.html#ejercicios-1243"><i class="fa fa-check"></i>12.4.3 Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="datos-ordenados.html"><a href="datos-ordenados.html#valores-faltantes125"><i class="fa fa-check"></i>12.5 Valores faltantes</a>
<ul>
<li class="chapter" data-level="" data-path="datos-ordenados.html"><a href="datos-ordenados.html#ejercicios-1251"><i class="fa fa-check"></i>12.5.1 Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="datos-ordenados.html"><a href="datos-ordenados.html#estudio-caso"><i class="fa fa-check"></i>12.6 Estudio de caso</a>
<ul>
<li class="chapter" data-level="" data-path="datos-ordenados.html"><a href="datos-ordenados.html#ejercicios-1261"><i class="fa fa-check"></i>12.6.1 Ejercicios</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="13" data-path="datos-relacionales.html"><a href="datos-relacionales.html"><i class="fa fa-check"></i><b>13</b> Datos relacionales</a>
<ul>
<li class="chapter" data-level="" data-path="datos-relacionales.html"><a href="datos-relacionales.html#vuelos-relacionales"><i class="fa fa-check"></i>13.2 Datos sobre vuelos</a>
<ul>
<li class="chapter" data-level="" data-path="datos-relacionales.html"><a href="datos-relacionales.html#ejercicios-1321"><i class="fa fa-check"></i>13.2.1 Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="datos-relacionales.html"><a href="datos-relacionales.html#claves"><i class="fa fa-check"></i>13.3 Claves</a>
<ul>
<li class="chapter" data-level="" data-path="datos-relacionales.html"><a href="datos-relacionales.html#ejercicios-1331"><i class="fa fa-check"></i>13.3.1 Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="13.1" data-path="datos-relacionales.html"><a href="datos-relacionales.html#mutating-joins"><i class="fa fa-check"></i><b>13.1</b> 13.4 Uniones de transformación</a>
<ul>
<li class="chapter" data-level="" data-path="datos-relacionales.html"><a href="datos-relacionales.html#ejercicios-1346"><i class="fa fa-check"></i>13.4.6 Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="13.2" data-path="datos-relacionales.html"><a href="datos-relacionales.html#filtering-joins"><i class="fa fa-check"></i><b>13.2</b> 13.5 Uniones de filtro</a>
<ul>
<li class="chapter" data-level="" data-path="datos-relacionales.html"><a href="datos-relacionales.html#ejercicios-1351"><i class="fa fa-check"></i>13.5.1 Ejercicios</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="14" data-path="cadenas-de-caracteres.html"><a href="cadenas-de-caracteres.html"><i class="fa fa-check"></i><b>14</b> Cadenas de caracteres</a>
<ul>
<li class="chapter" data-level="" data-path="cadenas-de-caracteres.html"><a href="cadenas-de-caracteres.html#cadena-basics"><i class="fa fa-check"></i>14.2 Cadenas: elementos básicos</a>
<ul>
<li class="chapter" data-level="" data-path="cadenas-de-caracteres.html"><a href="cadenas-de-caracteres.html#ejercicios-1425"><i class="fa fa-check"></i>14.2.5 Ejercicios</a></li>
<li class="chapter" data-level="" data-path="cadenas-de-caracteres.html"><a href="cadenas-de-caracteres.html#coincidencia"><i class="fa fa-check"></i>14.2.6 Buscar coincidencia de patrones con expresiones regulares</a></li>
<li class="chapter" data-level="" data-path="cadenas-de-caracteres.html"><a href="cadenas-de-caracteres.html#anclas"><i class="fa fa-check"></i>14.2.8 Anclas</a></li>
<li class="chapter" data-level="" data-path="cadenas-de-caracteres.html"><a href="cadenas-de-caracteres.html#clases-caracteres"><i class="fa fa-check"></i>14.2.9 Clases de caracteres y alternativas</a></li>
<li class="chapter" data-level="" data-path="cadenas-de-caracteres.html"><a href="cadenas-de-caracteres.html#repeticion"><i class="fa fa-check"></i>14.2.10 Repetición</a></li>
<li class="chapter" data-level="" data-path="cadenas-de-caracteres.html"><a href="cadenas-de-caracteres.html#agrupamiento"><i class="fa fa-check"></i>14.2.11 Agrupamiento y referencias previas</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="cadenas-de-caracteres.html"><a href="cadenas-de-caracteres.html#herramientas"><i class="fa fa-check"></i>14.3 Herramientas</a>
<ul>
<li class="chapter" data-level="" data-path="cadenas-de-caracteres.html"><a href="cadenas-de-caracteres.html#ejercicios-1432"><i class="fa fa-check"></i>14.3.2 Ejercicios</a></li>
<li class="chapter" data-level="" data-path="cadenas-de-caracteres.html"><a href="cadenas-de-caracteres.html#extraer-coincidencias"><i class="fa fa-check"></i>14.3.3 Extraer coincidencias</a></li>
<li class="chapter" data-level="" data-path="cadenas-de-caracteres.html"><a href="cadenas-de-caracteres.html#coincidencias-agrupadas"><i class="fa fa-check"></i>14.3.4 Coincidencias agrupadas</a></li>
<li class="chapter" data-level="" data-path="cadenas-de-caracteres.html"><a href="cadenas-de-caracteres.html#remplazar-coincidencias"><i class="fa fa-check"></i>14.3.5 Remplazar coincidencias</a></li>
<li class="chapter" data-level="" data-path="cadenas-de-caracteres.html"><a href="cadenas-de-caracteres.html#divisiones"><i class="fa fa-check"></i>14.3.6 Divisiones</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="cadenas-de-caracteres.html"><a href="cadenas-de-caracteres.html#otros-patrones144"><i class="fa fa-check"></i>14.4 Otro tipo de patrones</a>
<ul>
<li class="chapter" data-level="" data-path="cadenas-de-caracteres.html"><a href="cadenas-de-caracteres.html#ejercicios-1441"><i class="fa fa-check"></i>14.4.1 Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="cadenas-de-caracteres.html"><a href="cadenas-de-caracteres.html#stringi"><i class="fa fa-check"></i>14.6 stringi</a>
<ul>
<li class="chapter" data-level="" data-path="cadenas-de-caracteres.html"><a href="cadenas-de-caracteres.html#ejercicios-1461"><i class="fa fa-check"></i>14.6.1 Ejercicios</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="15" data-path="factores.html"><a href="factores.html"><i class="fa fa-check"></i><b>15</b> Factores</a>
<ul>
<li class="chapter" data-level="" data-path="factores.html"><a href="factores.html#encuesta"><i class="fa fa-check"></i>15.3 Encuesta social general</a>
<ul>
<li class="chapter" data-level="" data-path="factores.html"><a href="factores.html#ejercicios-1531"><i class="fa fa-check"></i>15.3.1 Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="factores.html"><a href="factores.html#modificar-factores"><i class="fa fa-check"></i>15.4 Modificar el orden de los factores</a>
<ul>
<li class="chapter" data-level="" data-path="factores.html"><a href="factores.html#ejercicios-1541"><i class="fa fa-check"></i>15.4.1 Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="factores.html"><a href="factores.html#modificar-niveles"><i class="fa fa-check"></i>15.5 Modificar los niveles de los factores</a>
<ul>
<li class="chapter" data-level="" data-path="factores.html"><a href="factores.html#ejercicios-1551"><i class="fa fa-check"></i>15.5.1 Ejercicios</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="16" data-path="horas-y-fechas.html"><a href="horas-y-fechas.html"><i class="fa fa-check"></i><b>16</b> Horas y fechas</a>
<ul>
<li class="chapter" data-level="" data-path="horas-y-fechas.html"><a href="horas-y-fechas.html#crear-horas"><i class="fa fa-check"></i>16.2 Creando horas/fechas</a>
<ul>
<li class="chapter" data-level="" data-path="horas-y-fechas.html"><a href="horas-y-fechas.html#ejercicios-1624"><i class="fa fa-check"></i>16.2.4 Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="horas-y-fechas.html"><a href="horas-y-fechas.html#componentes-fecha"><i class="fa fa-check"></i>16.3 Componentes fecha-hora</a>
<ul>
<li class="chapter" data-level="" data-path="horas-y-fechas.html"><a href="horas-y-fechas.html#ejercicios-1634"><i class="fa fa-check"></i>16.3.4 Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="horas-y-fechas.html"><a href="horas-y-fechas.html#lapsos-tiempo"><i class="fa fa-check"></i>16.4 Lapsos de tiempo</a>
<ul>
<li class="chapter" data-level="" data-path="horas-y-fechas.html"><a href="horas-y-fechas.html#ejercicios-1645"><i class="fa fa-check"></i>16.4.5 Ejercicios</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>III Programar</b></span></li>
<li class="chapter" data-level="17" data-path="introducción-6.html"><a href="introducción-6.html"><i class="fa fa-check"></i><b>17</b> Introducción</a></li>
<li class="chapter" data-level="18" data-path="pipes.html"><a href="pipes.html"><i class="fa fa-check"></i><b>18</b> Pipes</a></li>
<li class="chapter" data-level="19" data-path="funciones.html"><a href="funciones.html"><i class="fa fa-check"></i><b>19</b> Funciones</a>
<ul>
<li class="chapter" data-level="" data-path="funciones.html"><a href="funciones.html#escribir-funcion"><i class="fa fa-check"></i>19.2 ¿Cuándo deberías escribir una función?</a>
<ul>
<li class="chapter" data-level="" data-path="funciones.html"><a href="funciones.html#ejercicios-1921"><i class="fa fa-check"></i>19.2.1 Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="funciones.html"><a href="funciones.html#funciones-humanos"><i class="fa fa-check"></i>19.3 Las funciones son para los humanos y las computadoras</a>
<ul>
<li class="chapter" data-level="" data-path="funciones.html"><a href="funciones.html#ejercicios-1931"><i class="fa fa-check"></i>19.3.1 Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="funciones.html"><a href="funciones.html#ejecucion-condicional"><i class="fa fa-check"></i>19.4 Ejecución condicional</a>
<ul>
<li class="chapter" data-level="" data-path="funciones.html"><a href="funciones.html#ejercicios-1944"><i class="fa fa-check"></i>19.4.4 Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="funciones.html"><a href="funciones.html#argumentos-funciones"><i class="fa fa-check"></i>19.5 Argumentos de funciones</a>
<ul>
<li class="chapter" data-level="" data-path="funciones.html"><a href="funciones.html#ejercicios-1955"><i class="fa fa-check"></i>19.5.5 Ejercicios</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="20" data-path="vectores.html"><a href="vectores.html"><i class="fa fa-check"></i><b>20</b> Vectores</a>
<ul>
<li class="chapter" data-level="" data-path="vectores.html"><a href="vectores.html#vectores-atomicos"><i class="fa fa-check"></i>20.3 Tipos importantes de vectores atómicos</a>
<ul>
<li class="chapter" data-level="" data-path="vectores.html"><a href="vectores.html#ejercicios-2035"><i class="fa fa-check"></i>20.3.5 Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="vectores.html"><a href="vectores.html#uso-vectores"><i class="fa fa-check"></i>20.4 Usando vectores atómicos</a>
<ul>
<li class="chapter" data-level="" data-path="vectores.html"><a href="vectores.html#ejercicios-2046"><i class="fa fa-check"></i>20.4.6 Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="vectores.html"><a href="vectores.html#listas"><i class="fa fa-check"></i>20.5 Vectores Recursivos (listas)</a>
<ul>
<li class="chapter" data-level="" data-path="vectores.html"><a href="vectores.html#ejercicios-2054"><i class="fa fa-check"></i>20.5.4 Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="vectores.html"><a href="vectores.html#vectores-aumentados"><i class="fa fa-check"></i>20.7 Vectores Aumentados</a>
<ul>
<li class="chapter" data-level="" data-path="vectores.html"><a href="vectores.html#ejercicios-2074"><i class="fa fa-check"></i>20.7.4 Ejecicios</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="21" data-path="iteración.html"><a href="iteración.html"><i class="fa fa-check"></i><b>21</b> Iteración</a>
<ul>
<li><a href="iteración.html#bucles-for">21.2 Bucles <em>for</em></a>
<ul>
<li class="chapter" data-level="" data-path="iteración.html"><a href="iteración.html#ejercicios2121"><i class="fa fa-check"></i>21.2.1 Ejercicios</a></li>
</ul></li>
<li><a href="iteración.html#variaciones-bucles">21.3 Variaciones de bucles <em>for</em></a>
<ul>
<li class="chapter" data-level="" data-path="iteración.html"><a href="iteración.html#ejercicios-2135"><i class="fa fa-check"></i>21.3.5 Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="21.1" data-path="iteración.html"><a href="iteración.html#bucles-for-vs.-funcionales-for-funcionales"><i class="fa fa-check"></i><b>21.1</b> 21.4 Bucles <em>for</em> vs. funcionales{-for-funcionales</a>
<ul>
<li class="chapter" data-level="" data-path="iteración.html"><a href="iteración.html#ejercicios-2141"><i class="fa fa-check"></i>21.4.1 Ejercicios</a></li>
</ul></li>
<li><a href="iteración.html#funciones-map">21.5 Las funciones <em>map</em></a>
<ul>
<li class="chapter" data-level="" data-path="iteración.html"><a href="iteración.html#ejercicios-2153"><i class="fa fa-check"></i>21.5.3 Ejercicios</a></li>
</ul></li>
<li><a href="iteración.html#otros-patrones">21.9.1 Otros patrones para los bucles <em>for</em></a>
<ul>
<li class="chapter" data-level="" data-path="iteración.html"><a href="iteración.html#ejercicios-2193"><i class="fa fa-check"></i>21.9.3 Ejercicios</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>IV Modelar</b></span></li>
<li class="chapter" data-level="22" data-path="introducción-7.html"><a href="introducción-7.html"><i class="fa fa-check"></i><b>22</b> Introducción</a></li>
<li class="chapter" data-level="23" data-path="modelos-conceptos-básicos.html"><a href="modelos-conceptos-básicos.html"><i class="fa fa-check"></i><b>23</b> Modelos: conceptos básicos</a>
<ul>
<li class="chapter" data-level="" data-path="modelos-conceptos-básicos.html"><a href="modelos-conceptos-básicos.html#modelo-simple"><i class="fa fa-check"></i>23.2 Un modelo simple</a>
<ul>
<li class="chapter" data-level="" data-path="modelos-conceptos-básicos.html"><a href="modelos-conceptos-básicos.html#ejercicios-2321"><i class="fa fa-check"></i>23.2.1 Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="modelos-conceptos-básicos.html"><a href="modelos-conceptos-básicos.html#visualizando-modelos"><i class="fa fa-check"></i>23.3 Visualizando modelos</a>
<ul>
<li class="chapter" data-level="" data-path="modelos-conceptos-básicos.html"><a href="modelos-conceptos-básicos.html#ejercicios-2333"><i class="fa fa-check"></i>23.3.3 Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="modelos-conceptos-básicos.html"><a href="modelos-conceptos-básicos.html#familias-modelos"><i class="fa fa-check"></i>23.4 Fórmulas y familias de modelos</a>
<ul>
<li class="chapter" data-level="" data-path="modelos-conceptos-básicos.html"><a href="modelos-conceptos-básicos.html#ejercicios-2345"><i class="fa fa-check"></i>23.4.5 Ejercicios</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="24" data-path="construcción-de-modelos.html"><a href="construcción-de-modelos.html"><i class="fa fa-check"></i><b>24</b> Construcción de modelos</a>
<ul>
<li class="chapter" data-level="" data-path="construcción-de-modelos.html"><a href="construcción-de-modelos.html#diamantes-caros"><i class="fa fa-check"></i>24.2 ¿Por qué los diamantes de baja calidad son más caros?</a>
<ul>
<li class="chapter" data-level="" data-path="construcción-de-modelos.html"><a href="construcción-de-modelos.html#ejercicios-2423"><i class="fa fa-check"></i>24.2.3 Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="construcción-de-modelos.html"><a href="construcción-de-modelos.html#vuelos-diarios"><i class="fa fa-check"></i>24.3 ¿Qué afecta el número de vuelos diarios?</a>
<ul>
<li class="chapter" data-level="" data-path="construcción-de-modelos.html"><a href="construcción-de-modelos.html#ejercicios-2435"><i class="fa fa-check"></i>24.3.5 Ejercicios</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="25" data-path="muchos-modelos.html"><a href="muchos-modelos.html"><i class="fa fa-check"></i><b>25</b> Muchos modelos</a>
<ul>
<li class="chapter" data-level="" data-path="muchos-modelos.html"><a href="muchos-modelos.html#gapminder"><i class="fa fa-check"></i>25.2 gapminder</a>
<ul>
<li class="chapter" data-level="" data-path="muchos-modelos.html"><a href="muchos-modelos.html#ejercicios-2525"><i class="fa fa-check"></i>25.2.5 Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="muchos-modelos.html"><a href="muchos-modelos.html#columnas-lista"><i class="fa fa-check"></i>25.4 Creando columnas-lista</a>
<ul>
<li class="chapter" data-level="" data-path="muchos-modelos.html"><a href="muchos-modelos.html#ejercicios-2545"><i class="fa fa-check"></i>25.4.5 Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="muchos-modelos.html"><a href="muchos-modelos.html#simplificando"><i class="fa fa-check"></i>25.5 Simplificando columnas-lista</a>
<ul>
<li class="chapter" data-level="" data-path="muchos-modelos.html"><a href="muchos-modelos.html#ejercicios-2553"><i class="fa fa-check"></i>25.5.3 Ejercicios</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>V Comunicar</b></span></li>
<li class="chapter" data-level="26" data-path="introducción-8.html"><a href="introducción-8.html"><i class="fa fa-check"></i><b>26</b> Introducción</a></li>
<li class="chapter" data-level="27" data-path="r-markdown.html"><a href="r-markdown.html"><i class="fa fa-check"></i><b>27</b> R Markdown</a>
<ul>
<li class="chapter" data-level="" data-path="r-markdown.html"><a href="r-markdown.html#rmarkdown-basico"><i class="fa fa-check"></i>27.2 R Markdown básico</a>
<ul>
<li class="chapter" data-level="" data-path="r-markdown.html"><a href="r-markdown.html#ejercicios-2721"><i class="fa fa-check"></i>27.2.1 Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="r-markdown.html"><a href="r-markdown.html#formateo-texto"><i class="fa fa-check"></i>27.3 Formateo de texto con Markdown</a>
<ul>
<li class="chapter" data-level="" data-path="r-markdown.html"><a href="r-markdown.html#ejercicios-2731"><i class="fa fa-check"></i>27.3.1 Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="r-markdown.html"><a href="r-markdown.html#bloques-codigo"><i class="fa fa-check"></i>27.4 Bloques de código</a>
<ul>
<li class="chapter" data-level="" data-path="r-markdown.html"><a href="r-markdown.html#ejercicios-2747"><i class="fa fa-check"></i>27.4.7 Ejercicios</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="28" data-path="comunicar-con-gráficos.html"><a href="comunicar-con-gráficos.html"><i class="fa fa-check"></i><b>28</b> Comunicar con gráficos</a>
<ul>
<li class="chapter" data-level="" data-path="comunicar-con-gráficos.html"><a href="comunicar-con-gráficos.html#etiquetas"><i class="fa fa-check"></i>2.8 Etiquetas</a>
<ul>
<li class="chapter" data-level="" data-path="comunicar-con-gráficos.html"><a href="comunicar-con-gráficos.html#ejercicios-2821"><i class="fa fa-check"></i>28.2.1 Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="comunicar-con-gráficos.html"><a href="comunicar-con-gráficos.html#anotaciones"><i class="fa fa-check"></i>28.3 Anotaciones</a>
<ul>
<li class="chapter" data-level="" data-path="comunicar-con-gráficos.html"><a href="comunicar-con-gráficos.html#ejercicios-2831"><i class="fa fa-check"></i>28.3.1 Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="comunicar-con-gráficos.html"><a href="comunicar-con-gráficos.html#escalas"><i class="fa fa-check"></i>28.4 Escalas</a>
<ul>
<li class="chapter" data-level="" data-path="comunicar-con-gráficos.html"><a href="comunicar-con-gráficos.html#ejercicios-2844"><i class="fa fa-check"></i>28.4.4 Ejercicios</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="29" data-path="r-markdown-formats.html"><a href="r-markdown-formats.html"><i class="fa fa-check"></i><b>29</b> R Markdown formats</a></li>
<li class="chapter" data-level="30" data-path="flujo-de-trabajo-en-r-markdown.html"><a href="flujo-de-trabajo-en-r-markdown.html"><i class="fa fa-check"></i><b>30</b> Flujo de trabajo en R Markdown</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">R para Ciencia de Datos: Soluciones de los ejercicios</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="factores" class="section level1" number="15">
<h1><span class="header-section-number">15</span> Factores</h1>
<div id="encuesta" class="section level2 unnumbered">
<h2>15.3 Encuesta social general</h2>
<div id="ejercicios-1531" class="section level3 unnumbered">
<h3>15.3.1 Ejercicios</h3>
<ol style="list-style-type: decimal">
<li>Explora la distribución de <code>ingreso</code>. ¿Qué hace que el gráfico de barras por defecto sea tan difícil de comprender? ¿Cómo podrías mejorarlo?</li>
</ol>
<div class="solucion">
<h3>
Solución
</h3>
<p>Este es el gráfico por defecto:</p>
<div class="sourceCode" id="cb251"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb251-1"><a href="factores.html#cb251-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(encuesta) <span class="sc">+</span> </span>
<span id="cb251-2"><a href="factores.html#cb251-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">aes</span>(ingreso) <span class="sc">+</span> </span>
<span id="cb251-3"><a href="factores.html#cb251-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>()</span></code></pre></div>
<p><img src="15-factors_files/figure-html/unnamed-chunk-2-1.png" width="70%" style="display: block; margin: auto;" /></p>
<p>Resulta difícil de leer porque las etiquetas de los valores son muy largas. Una opción para resolver esto sería girando el gráfico. Esto se puede hacer con <code>coord_flip()</code> o, en la última versión de ggplot, moviendo la variable de eje:</p>
<div class="sourceCode" id="cb252"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb252-1"><a href="factores.html#cb252-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(encuesta) <span class="sc">+</span> </span>
<span id="cb252-2"><a href="factores.html#cb252-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">aes</span>(ingreso) <span class="sc">+</span> </span>
<span id="cb252-3"><a href="factores.html#cb252-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>() <span class="sc">+</span></span>
<span id="cb252-4"><a href="factores.html#cb252-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>()</span>
<span id="cb252-5"><a href="factores.html#cb252-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb252-6"><a href="factores.html#cb252-6" aria-hidden="true" tabindex="-1"></a><span class="co"># es lo mismo que </span></span>
<span id="cb252-7"><a href="factores.html#cb252-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb252-8"><a href="factores.html#cb252-8" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(encuesta) <span class="sc">+</span> </span>
<span id="cb252-9"><a href="factores.html#cb252-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">aes</span>(<span class="at">y =</span> ingreso) <span class="sc">+</span> </span>
<span id="cb252-10"><a href="factores.html#cb252-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>()</span></code></pre></div>
<p><img src="15-factors_files/figure-html/unnamed-chunk-3-1.png" width="70%" style="display: block; margin: auto;" /><img src="15-factors_files/figure-html/unnamed-chunk-3-2.png" width="70%" style="display: block; margin: auto;" /></p>
<p>En este caso particular no tendría tanto sentido ordenar las barras de forma ascendente o descente, ya que los datos ya tienen un orden. Algo que sí podríamos hacer es eliminar “No aplica” y cambiar el nombre de la etiqueta del eje x:</p>
<div class="sourceCode" id="cb253"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb253-1"><a href="factores.html#cb253-1" aria-hidden="true" tabindex="-1"></a>encuesta <span class="sc">%&gt;%</span> </span>
<span id="cb253-2"><a href="factores.html#cb253-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(ingreso <span class="sc">!=</span> <span class="st">&quot;No aplica&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb253-3"><a href="factores.html#cb253-3" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span> </span>
<span id="cb253-4"><a href="factores.html#cb253-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">aes</span>(<span class="at">y =</span> ingreso) <span class="sc">+</span> </span>
<span id="cb253-5"><a href="factores.html#cb253-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>() <span class="sc">+</span></span>
<span id="cb253-6"><a href="factores.html#cb253-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;Respuestas&quot;</span>)</span></code></pre></div>
<p><img src="15-factors_files/figure-html/unnamed-chunk-4-1.png" width="70%" style="display: block; margin: auto;" /></p>
</div>
<ol start="2" style="list-style-type: decimal">
<li>¿Cuál es la <code>religion</code> más común de la encuesta? ¿Cuál es el <code>partido</code> más común?</li>
</ol>
<div class="solucion">
<h3>
Solución
</h3>
<p>Una forma de encontrar el valor con mayor frecuencia sería contando con <code>count()</code> y luego ordenando de mayor a menor con <code>arrange(desc())</code> para ver cuál queda primero. Otra opción es utilizar la función <code>top_n()</code>, también del paquete <strong>dplyr</strong>.</p>
<p>La religión más común es “Protestante”:</p>
<div class="sourceCode" id="cb254"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb254-1"><a href="factores.html#cb254-1" aria-hidden="true" tabindex="-1"></a>encuesta <span class="sc">%&gt;%</span> </span>
<span id="cb254-2"><a href="factores.html#cb254-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(religion) <span class="sc">%&gt;%</span> </span>
<span id="cb254-3"><a href="factores.html#cb254-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">top_n</span>(<span class="dv">1</span>)</span>
<span id="cb254-4"><a href="factores.html#cb254-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Selecting by n</span></span>
<span id="cb254-5"><a href="factores.html#cb254-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 1 × 2</span></span>
<span id="cb254-6"><a href="factores.html#cb254-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   religion        n</span></span>
<span id="cb254-7"><a href="factores.html#cb254-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   &lt;fct&gt;       &lt;int&gt;</span></span>
<span id="cb254-8"><a href="factores.html#cb254-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1 Protestante 10846</span></span></code></pre></div>
<p>El valor más común en <code>partido</code> es “Independiente”:</p>
<div class="sourceCode" id="cb255"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb255-1"><a href="factores.html#cb255-1" aria-hidden="true" tabindex="-1"></a>encuesta <span class="sc">%&gt;%</span> </span>
<span id="cb255-2"><a href="factores.html#cb255-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(partido) <span class="sc">%&gt;%</span> </span>
<span id="cb255-3"><a href="factores.html#cb255-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">top_n</span>(<span class="dv">1</span>)</span>
<span id="cb255-4"><a href="factores.html#cb255-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Selecting by n</span></span>
<span id="cb255-5"><a href="factores.html#cb255-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 1 × 2</span></span>
<span id="cb255-6"><a href="factores.html#cb255-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   partido           n</span></span>
<span id="cb255-7"><a href="factores.html#cb255-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   &lt;fct&gt;         &lt;int&gt;</span></span>
<span id="cb255-8"><a href="factores.html#cb255-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1 Independiente  4119</span></span></code></pre></div>
</div>
<ol start="3" style="list-style-type: decimal">
<li>¿A qué <code>religion</code> se aplica cada <code>denominacion</code>? ¿Cómo puedes encontrarlo con una tabla? ¿Cómo lo puedes descubrir con una visualización?</li>
</ol>
<div class="solucion">
<h3>
Solución
</h3>
<p>Una forma de hacerlo sería contar las combinaciones de religión y denominación, lo que nos entregaría una tabla en la que podríamos ver cada cruce (por ejemplo, con <code>encuesta %&gt;% count(religion, denominacion)</code>). Sin embargo, antes de hacer eso sería bueno eliminar los niveles que corresponden a una denominación: “Sin respuesta”, “No sabe”, “No aplica”, “No denominacional”:</p>
<div class="sourceCode" id="cb256"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb256-1"><a href="factores.html#cb256-1" aria-hidden="true" tabindex="-1"></a>encuesta <span class="sc">%&gt;%</span> </span>
<span id="cb256-2"><a href="factores.html#cb256-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span>denominacion <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;Sin respuesta&quot;</span>, <span class="st">&quot;No sabe&quot;</span>, <span class="st">&quot;No aplica&quot;</span>, <span class="st">&quot;No denominacional&quot;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb256-3"><a href="factores.html#cb256-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(religion, denominacion)</span>
<span id="cb256-4"><a href="factores.html#cb256-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 26 × 3</span></span>
<span id="cb256-5"><a href="factores.html#cb256-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   religion    denominacion                        n</span></span>
<span id="cb256-6"><a href="factores.html#cb256-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   &lt;fct&gt;       &lt;fct&gt;                           &lt;int&gt;</span></span>
<span id="cb256-7"><a href="factores.html#cb256-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1 Protestante Otra                             2534</span></span>
<span id="cb256-8"><a href="factores.html#cb256-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2 Protestante Episcopal                         397</span></span>
<span id="cb256-9"><a href="factores.html#cb256-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3 Protestante Presbiteriana, no sabe cuál       244</span></span>
<span id="cb256-10"><a href="factores.html#cb256-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4 Protestante Presbiteriana, fusionadas          67</span></span>
<span id="cb256-11"><a href="factores.html#cb256-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5 Protestante Otra presbiteriana                 47</span></span>
<span id="cb256-12"><a href="factores.html#cb256-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6 Protestante Unión presbiteriana de iglesias   110</span></span>
<span id="cb256-13"><a href="factores.html#cb256-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # … with 20 more rows</span></span></code></pre></div>
<p>Las denominaciones corresponden a la religión Protestante. Podemos comprobar que es la única que aparece solo contando <code>religion</code>:</p>
<div class="sourceCode" id="cb257"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb257-1"><a href="factores.html#cb257-1" aria-hidden="true" tabindex="-1"></a>encuesta <span class="sc">%&gt;%</span> </span>
<span id="cb257-2"><a href="factores.html#cb257-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span>denominacion <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;Sin respuesta&quot;</span>, <span class="st">&quot;No sabe&quot;</span>, <span class="st">&quot;No aplica&quot;</span>, <span class="st">&quot;No denominacional&quot;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb257-3"><a href="factores.html#cb257-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(religion)</span>
<span id="cb257-4"><a href="factores.html#cb257-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 1 × 2</span></span>
<span id="cb257-5"><a href="factores.html#cb257-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   religion        n</span></span>
<span id="cb257-6"><a href="factores.html#cb257-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   &lt;fct&gt;       &lt;int&gt;</span></span>
<span id="cb257-7"><a href="factores.html#cb257-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1 Protestante  9559</span></span></code></pre></div>
<p>En una visualización lo podríamos descubrir con <code>facet_wrap()</code>. Podemos hacer un gráfico de columnas para la frecuencia de respuestas por cada denominación. Si faceteamos el gráfico según religión, solo nos aparecerá protestante porque en las otras religiones no hay valores.</p>
<div class="sourceCode" id="cb258"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb258-1"><a href="factores.html#cb258-1" aria-hidden="true" tabindex="-1"></a>encuesta <span class="sc">%&gt;%</span> </span>
<span id="cb258-2"><a href="factores.html#cb258-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span>denominacion <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;Sin respuesta&quot;</span>, <span class="st">&quot;No sabe&quot;</span>, <span class="st">&quot;No aplica&quot;</span>, <span class="st">&quot;No denominacional&quot;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb258-3"><a href="factores.html#cb258-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(religion, denominacion) <span class="sc">%&gt;%</span> </span>
<span id="cb258-4"><a href="factores.html#cb258-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">y =</span> denominacion, <span class="at">x =</span> n)) <span class="sc">+</span></span>
<span id="cb258-5"><a href="factores.html#cb258-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>() <span class="sc">+</span></span>
<span id="cb258-6"><a href="factores.html#cb258-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>religion)</span></code></pre></div>
<p><img src="15-factors_files/figure-html/unnamed-chunk-9-1.png" width="70%" style="display: block; margin: auto;" /></p>
<p>Como se comentó antes en el capítulo, ggplot descarta los niveles no utilizados. Si quisieras que los mostrara igual, podrías agregar la opción <code>drop = FALSE</code>, aunque como son tantos los niveles de <code>denominacion</code> quedarían amontonadas las etiquetas y habría que editar el tamaño del gráfico para evitar este problema:</p>
<div class="sourceCode" id="cb259"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb259-1"><a href="factores.html#cb259-1" aria-hidden="true" tabindex="-1"></a>encuesta <span class="sc">%&gt;%</span> </span>
<span id="cb259-2"><a href="factores.html#cb259-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span>denominacion <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;Sin respuesta&quot;</span>, <span class="st">&quot;No sabe&quot;</span>, <span class="st">&quot;No aplica&quot;</span>, <span class="st">&quot;No denominacional&quot;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb259-3"><a href="factores.html#cb259-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(religion, denominacion) <span class="sc">%&gt;%</span> </span>
<span id="cb259-4"><a href="factores.html#cb259-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">y =</span> denominacion, <span class="at">x =</span> n)) <span class="sc">+</span></span>
<span id="cb259-5"><a href="factores.html#cb259-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>() <span class="sc">+</span></span>
<span id="cb259-6"><a href="factores.html#cb259-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>religion, <span class="at">drop =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
<p><img src="15-factors_files/figure-html/unnamed-chunk-10-1.png" width="70%" style="display: block; margin: auto;" /></p>
</div>
</div>
</div>
<div id="modificar-factores" class="section level2 unnumbered">
<h2>15.4 Modificar el orden de los factores</h2>
<div id="ejercicios-1541" class="section level3 unnumbered">
<h3>15.4.1 Ejercicios</h3>
<ol style="list-style-type: decimal">
<li>Hay algunos números sospechosamente grandes en <code>horas_tv</code>. ¿Es la media un buen resumen?</li>
</ol>
<div class="solucion">
<h3>
Solución
</h3>
<p>Miremos los estadísticos de resumen y hagamos un histograma para explorar los datos:</p>
<div class="sourceCode" id="cb260"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb260-1"><a href="factores.html#cb260-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(encuesta<span class="sc">$</span>horas_tv)</span>
<span id="cb260-2"><a href="factores.html#cb260-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    Min. 1st Qu.  Median    Mean 3rd Qu.    Max.    NA&#39;s </span></span>
<span id="cb260-3"><a href="factores.html#cb260-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;       0       1       2       3       4      24   10146</span></span>
<span id="cb260-4"><a href="factores.html#cb260-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb260-5"><a href="factores.html#cb260-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb260-6"><a href="factores.html#cb260-6" aria-hidden="true" tabindex="-1"></a>encuesta <span class="sc">%&gt;%</span> </span>
<span id="cb260-7"><a href="factores.html#cb260-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(horas_tv)) <span class="sc">%&gt;%</span> </span>
<span id="cb260-8"><a href="factores.html#cb260-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>((horas_tv))) <span class="sc">+</span> <span class="fu">geom_histogram</span>(<span class="at">binwidth =</span> <span class="dv">1</span>)</span></code></pre></div>
<p><img src="15-factors_files/figure-html/unnamed-chunk-11-1.png" width="70%" style="display: block; margin: auto;" /></p>
<p>Efectivamente, hay valores demasiado altos. Pareciera que hay personas que ven televisión todo el día y no duermen nunca, lo que es poco verosímil. Podría ser mejor utilizar la mediana como resumen. En todo caso, estos números anormalmente altos son bastante pocos.</p>
</div>
<ol start="2" style="list-style-type: decimal">
<li>Identifica, para cada factor en <code>encuesta</code>, si el orden de los niveles es arbitrario o responde a algún principio.</li>
</ol>
<div class="solucion">
<h3>
Solución
</h3>
<p>Primero, identifiquemos qué variables son factores. Una forma de hacerlo es utilizar <code>select_if</code>, que selecciona columnas de acuerdo a una condición, y luego extraer los nombres de las variables.</p>
<div class="sourceCode" id="cb261"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb261-1"><a href="factores.html#cb261-1" aria-hidden="true" tabindex="-1"></a>encuesta <span class="sc">%&gt;%</span> </span>
<span id="cb261-2"><a href="factores.html#cb261-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select_if</span>(is.factor) <span class="sc">%&gt;%</span> </span>
<span id="cb261-3"><a href="factores.html#cb261-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">names</span>()</span>
<span id="cb261-4"><a href="factores.html#cb261-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;estado_civil&quot; &quot;raza&quot;         &quot;ingreso&quot;      &quot;partido&quot;      &quot;religion&quot;    </span></span>
<span id="cb261-5"><a href="factores.html#cb261-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [6] &quot;denominacion&quot;</span></span></code></pre></div>
<p>Ahora, revisemos los niveles de cada una de ellas.</p>
<p>En el caso de <code>estado_civil</code> pareciera que tenemos dos extremos: nunca se ha casado y casado, y entre ellas están agrupadas las categorías que hacen alusión a gente que estuvo casada, pero ya no.</p>
<div class="sourceCode" id="cb262"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb262-1"><a href="factores.html#cb262-1" aria-hidden="true" tabindex="-1"></a><span class="fu">levels</span>(encuesta<span class="sc">$</span>estado_civil)</span>
<span id="cb262-2"><a href="factores.html#cb262-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;Sin respuesta&quot;      &quot;Nunca se ha casado&quot; &quot;Separado&quot;          </span></span>
<span id="cb262-3"><a href="factores.html#cb262-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [4] &quot;Divorciado&quot;         &quot;Viudo&quot;              &quot;Casado&quot;</span></span></code></pre></div>
<p>En la variable <code>raza</code> pareciera no haber ningún orden en particular:</p>
<div class="sourceCode" id="cb263"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb263-1"><a href="factores.html#cb263-1" aria-hidden="true" tabindex="-1"></a><span class="fu">levels</span>(encuesta<span class="sc">$</span>raza)</span>
<span id="cb263-2"><a href="factores.html#cb263-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;Otra&quot;      &quot;Negra&quot;     &quot;Blanca&quot;    &quot;No aplica&quot;</span></span></code></pre></div>
<p>Si visualizamos los datos, es posible ver que los tres primeros niveles se ordenaron por frecuencia.</p>
<div class="sourceCode" id="cb264"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb264-1"><a href="factores.html#cb264-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(encuesta, <span class="fu">aes</span>(raza)) <span class="sc">+</span> <span class="fu">geom_bar</span>() <span class="sc">+</span> <span class="fu">scale_x_discrete</span>(<span class="at">drop =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
<p><img src="15-factors_files/figure-html/unnamed-chunk-15-1.png" width="70%" style="display: block; margin: auto;" /></p>
<p><code>ingreso</code> está ordenado por rangos que van de mayor a menor.</p>
<div class="sourceCode" id="cb265"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb265-1"><a href="factores.html#cb265-1" aria-hidden="true" tabindex="-1"></a><span class="fu">levels</span>(encuesta<span class="sc">$</span>ingreso)</span>
<span id="cb265-2"><a href="factores.html#cb265-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [1] &quot;Sin respuesta&quot;        &quot;No sabe&quot;              &quot;Se niega a responder&quot;</span></span>
<span id="cb265-3"><a href="factores.html#cb265-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [4] &quot;25000 o más&quot;          &quot;20000 - 24999&quot;        &quot;15000 - 19999&quot;       </span></span>
<span id="cb265-4"><a href="factores.html#cb265-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [7] &quot;10000 - 14999&quot;        &quot;8000 - 9999&quot;          &quot;7000 - 7999&quot;         </span></span>
<span id="cb265-5"><a href="factores.html#cb265-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [10] &quot;6000 - 6999&quot;          &quot;5000 - 5999&quot;          &quot;4000 - 4999&quot;         </span></span>
<span id="cb265-6"><a href="factores.html#cb265-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [13] &quot;3000 - 3999&quot;          &quot;1000 - 2999&quot;          &quot;Menos de 1000&quot;       </span></span>
<span id="cb265-7"><a href="factores.html#cb265-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [16] &quot;No aplica&quot;</span></span></code></pre></div>
<p>Los niveles de <code>partido</code> están ordenados a partir de más republicano a más demócrata.</p>
<div class="sourceCode" id="cb266"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb266-1"><a href="factores.html#cb266-1" aria-hidden="true" tabindex="-1"></a><span class="fu">levels</span>(encuesta<span class="sc">$</span>partido)</span>
<span id="cb266-2"><a href="factores.html#cb266-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [1] &quot;Sin respuesta&quot;              &quot;No sabe&quot;                   </span></span>
<span id="cb266-3"><a href="factores.html#cb266-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [3] &quot;Otro partido&quot;               &quot;Fuertemente republicano&quot;   </span></span>
<span id="cb266-4"><a href="factores.html#cb266-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [5] &quot;No fuertemente republicano&quot; &quot;Ind, pro rep&quot;              </span></span>
<span id="cb266-5"><a href="factores.html#cb266-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [7] &quot;Independiente&quot;              &quot;Ind, pro dem&quot;              </span></span>
<span id="cb266-6"><a href="factores.html#cb266-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [9] &quot;No fuertemente demócrata&quot;   &quot;Fuertemente demócrata&quot;</span></span></code></pre></div>
<p><code>religión</code> pareciera no tener ningún orden en particular:</p>
<div class="sourceCode" id="cb267"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb267-1"><a href="factores.html#cb267-1" aria-hidden="true" tabindex="-1"></a><span class="fu">levels</span>(encuesta<span class="sc">$</span>religion)</span>
<span id="cb267-2"><a href="factores.html#cb267-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [1] &quot;Sin respuesta&quot;          &quot;No sabe&quot;                &quot;Inter o no confesional&quot;</span></span>
<span id="cb267-3"><a href="factores.html#cb267-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [4] &quot;Nativa americana&quot;       &quot;Cristiana&quot;              &quot;Cristiana ortodoxa&quot;    </span></span>
<span id="cb267-4"><a href="factores.html#cb267-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [7] &quot;Musulmana/Islam&quot;        &quot;Otra religión oriental&quot; &quot;Hinduismo&quot;             </span></span>
<span id="cb267-5"><a href="factores.html#cb267-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [10] &quot;Budismo&quot;                &quot;Otra&quot;                   &quot;Ninguna&quot;               </span></span>
<span id="cb267-6"><a href="factores.html#cb267-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [13] &quot;Judía&quot;                  &quot;Católica&quot;               &quot;Protestante&quot;           </span></span>
<span id="cb267-7"><a href="factores.html#cb267-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [16] &quot;No aplica&quot;</span></span></code></pre></div>
<p>Si visualizamos para chequear, podemos confirmar el orden aleatorio:</p>
<div class="sourceCode" id="cb268"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb268-1"><a href="factores.html#cb268-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(encuesta, <span class="fu">aes</span>(<span class="at">y =</span> religion)) <span class="sc">+</span> <span class="fu">geom_bar</span>() <span class="sc">+</span> <span class="fu">scale_x_discrete</span>(<span class="at">drop =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
<p><img src="15-factors_files/figure-html/unnamed-chunk-19-1.png" width="70%" style="display: block; margin: auto;" /></p>
<p>En el caso de <code>denominacion</code>, los niveles que pertencen a variantes de una denominacion (luterana, episcopal, metodista, etc.) están agrupados. Pero estos grupos entre sí no responden a un orden en particular:</p>
<div class="sourceCode" id="cb269"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb269-1"><a href="factores.html#cb269-1" aria-hidden="true" tabindex="-1"></a><span class="fu">levels</span>(encuesta<span class="sc">$</span>denominacion)</span>
<span id="cb269-2"><a href="factores.html#cb269-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [1] &quot;Sin respuesta&quot;                               </span></span>
<span id="cb269-3"><a href="factores.html#cb269-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [2] &quot;No sabe&quot;                                     </span></span>
<span id="cb269-4"><a href="factores.html#cb269-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [3] &quot;No denominacional&quot;                           </span></span>
<span id="cb269-5"><a href="factores.html#cb269-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [4] &quot;Otra&quot;                                        </span></span>
<span id="cb269-6"><a href="factores.html#cb269-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [5] &quot;Episcopal&quot;                                   </span></span>
<span id="cb269-7"><a href="factores.html#cb269-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [6] &quot;Presbiteriana, no sabe cuál&quot;                 </span></span>
<span id="cb269-8"><a href="factores.html#cb269-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [7] &quot;Presbiteriana, fusionadas&quot;                   </span></span>
<span id="cb269-9"><a href="factores.html#cb269-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [8] &quot;Otra presbiteriana&quot;                          </span></span>
<span id="cb269-10"><a href="factores.html#cb269-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [9] &quot;Unión presbiteriana de iglesias&quot;             </span></span>
<span id="cb269-11"><a href="factores.html#cb269-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [10] &quot;Iglesia presbiteriana de los EEUU&quot;           </span></span>
<span id="cb269-12"><a href="factores.html#cb269-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [11] &quot;Luterana, no sabe cuál&quot;                      </span></span>
<span id="cb269-13"><a href="factores.html#cb269-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [12] &quot;Evangélica luterana&quot;                         </span></span>
<span id="cb269-14"><a href="factores.html#cb269-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [13] &quot;Otras luteranas&quot;                             </span></span>
<span id="cb269-15"><a href="factores.html#cb269-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [14] &quot;Sínodo evangélico luterano de Wisconsin&quot;     </span></span>
<span id="cb269-16"><a href="factores.html#cb269-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [15] &quot;Sínodo luterano&quot;                             </span></span>
<span id="cb269-17"><a href="factores.html#cb269-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [16] &quot;Iglesia luterana de EEUU&quot;                    </span></span>
<span id="cb269-18"><a href="factores.html#cb269-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [17] &quot;Iglesia luterana americana&quot;                  </span></span>
<span id="cb269-19"><a href="factores.html#cb269-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [18] &quot;Metodista, no sabe cuál&quot;                     </span></span>
<span id="cb269-20"><a href="factores.html#cb269-20" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [19] &quot;Otras metodistas&quot;                            </span></span>
<span id="cb269-21"><a href="factores.html#cb269-21" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [20] &quot;Iglesia metodista unida&quot;                     </span></span>
<span id="cb269-22"><a href="factores.html#cb269-22" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [21] &quot;Iglesia africana metodista episcopal de Sion&quot;</span></span>
<span id="cb269-23"><a href="factores.html#cb269-23" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [22] &quot;Iglesia africana metodista episcopal&quot;        </span></span>
<span id="cb269-24"><a href="factores.html#cb269-24" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [23] &quot;Bautista, no sabe cuál&quot;                      </span></span>
<span id="cb269-25"><a href="factores.html#cb269-25" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [24] &quot;Otras bautistas&quot;                             </span></span>
<span id="cb269-26"><a href="factores.html#cb269-26" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [25] &quot;Bautistas del sur&quot;                           </span></span>
<span id="cb269-27"><a href="factores.html#cb269-27" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [26] &quot;Convención nacional bautista de EEUU&quot;        </span></span>
<span id="cb269-28"><a href="factores.html#cb269-28" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [27] &quot;Convención nacional baptista de america&quot;     </span></span>
<span id="cb269-29"><a href="factores.html#cb269-29" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [28] &quot;Iglesias bautistas de EEUU&quot;                  </span></span>
<span id="cb269-30"><a href="factores.html#cb269-30" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [29] &quot;Asociación bautista estadounidense&quot;          </span></span>
<span id="cb269-31"><a href="factores.html#cb269-31" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [30] &quot;No aplica&quot;</span></span></code></pre></div>
</div>
<ol start="3" style="list-style-type: decimal">
<li>¿Por qué mover “No aplica” al inicio de los niveles lo llevó al final del gráfico?</li>
</ol>
<div class="solucion">
<h3>
Solución
</h3>
</div>
</div>
</div>
<div id="modificar-niveles" class="section level2 unnumbered">
<h2>15.5 Modificar los niveles de los factores</h2>
<div id="ejercicios-1551" class="section level3 unnumbered">
<h3>15.5.1 Ejercicios</h3>
<ol style="list-style-type: decimal">
<li>¿Cómo han cambiado en el tiempo las proporciones de personas que se identifican como Demócratas, Republicanas e Independientes?</li>
</ol>
<div class="solucion">
<h3>
Solución
</h3>
<p>Para responder esta pregunta vamos a usar la versión de los datos que se muestran al final de esta sección en que los niveles de <code>partido</code> se agruparon con <code>factor_collapse)</code></p>
<div class="sourceCode" id="cb270"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb270-1"><a href="factores.html#cb270-1" aria-hidden="true" tabindex="-1"></a>partido_anio <span class="ot">&lt;-</span> encuesta <span class="sc">%&gt;%</span></span>
<span id="cb270-2"><a href="factores.html#cb270-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">partido =</span> <span class="fu">fct_collapse</span>(partido,</span>
<span id="cb270-3"><a href="factores.html#cb270-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">otro =</span> <span class="fu">c</span>(<span class="st">&quot;Sin respuesta&quot;</span>, <span class="st">&quot;No sabe&quot;</span>, <span class="st">&quot;Otro partido&quot;</span>),</span>
<span id="cb270-4"><a href="factores.html#cb270-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">republicano =</span> <span class="fu">c</span>(<span class="st">&quot;Fuertemente republicano&quot;</span>, <span class="st">&quot;No fuertemente republicano&quot;</span>),</span>
<span id="cb270-5"><a href="factores.html#cb270-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">independiente =</span> <span class="fu">c</span>(<span class="st">&quot;Ind, pro rep&quot;</span>, <span class="st">&quot;Independiente&quot;</span>, <span class="st">&quot;Ind, pro dem&quot;</span>),</span>
<span id="cb270-6"><a href="factores.html#cb270-6" aria-hidden="true" tabindex="-1"></a>    demócrata <span class="ot">=</span> <span class="fu">c</span>(<span class="st">&quot;No fuertemente demócrata&quot;</span>, <span class="st">&quot;Fuertemente demócrata&quot;</span>)</span>
<span id="cb270-7"><a href="factores.html#cb270-7" aria-hidden="true" tabindex="-1"></a>  )) <span class="sc">%&gt;%</span></span>
<span id="cb270-8"><a href="factores.html#cb270-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(anio, partido) </span>
<span id="cb270-9"><a href="factores.html#cb270-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb270-10"><a href="factores.html#cb270-10" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(partido_anio) <span class="sc">+</span></span>
<span id="cb270-11"><a href="factores.html#cb270-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">aes</span>(anio, n, <span class="at">colour =</span> partido) <span class="sc">+</span> </span>
<span id="cb270-12"><a href="factores.html#cb270-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>()</span></code></pre></div>
<p><img src="15-factors_files/figure-html/unnamed-chunk-21-1.png" width="70%" style="display: block; margin: auto;" /></p>
<p>Sería mejor si más que el número de respuestas, graficáramos la proporción:</p>
<div class="sourceCode" id="cb271"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb271-1"><a href="factores.html#cb271-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb271-2"><a href="factores.html#cb271-2" aria-hidden="true" tabindex="-1"></a>partido_anio <span class="sc">%&gt;%</span> </span>
<span id="cb271-3"><a href="factores.html#cb271-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(anio) <span class="sc">%&gt;%</span></span>
<span id="cb271-4"><a href="factores.html#cb271-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">proporcion =</span> n <span class="sc">/</span> <span class="fu">sum</span>(n)) <span class="sc">%&gt;%</span> </span>
<span id="cb271-5"><a href="factores.html#cb271-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb271-6"><a href="factores.html#cb271-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">aes</span>(anio, proporcion, <span class="at">colour =</span> partido) <span class="sc">+</span> </span>
<span id="cb271-7"><a href="factores.html#cb271-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>()</span></code></pre></div>
<p><img src="15-factors_files/figure-html/unnamed-chunk-22-1.png" width="70%" style="display: block; margin: auto;" /></p>
</div>
<ol start="2" style="list-style-type: decimal">
<li>¿Cómo podrías colapsar <code>ingreso</code> en un grupo más pequeño de categorías?</li>
</ol>
<div class="solucion">
<h3>
Solución
</h3>
<p>Actualmente los niveles agrupan los datos de tres formas: tramos de mil, dos mil y cinco mil dólares:</p>
<div class="sourceCode" id="cb272"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb272-1"><a href="factores.html#cb272-1" aria-hidden="true" tabindex="-1"></a><span class="fu">levels</span>(encuesta<span class="sc">$</span>ingreso)</span>
<span id="cb272-2"><a href="factores.html#cb272-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [1] &quot;Sin respuesta&quot;        &quot;No sabe&quot;              &quot;Se niega a responder&quot;</span></span>
<span id="cb272-3"><a href="factores.html#cb272-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [4] &quot;25000 o más&quot;          &quot;20000 - 24999&quot;        &quot;15000 - 19999&quot;       </span></span>
<span id="cb272-4"><a href="factores.html#cb272-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [7] &quot;10000 - 14999&quot;        &quot;8000 - 9999&quot;          &quot;7000 - 7999&quot;         </span></span>
<span id="cb272-5"><a href="factores.html#cb272-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [10] &quot;6000 - 6999&quot;          &quot;5000 - 5999&quot;          &quot;4000 - 4999&quot;         </span></span>
<span id="cb272-6"><a href="factores.html#cb272-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [13] &quot;3000 - 3999&quot;          &quot;1000 - 2999&quot;          &quot;Menos de 1000&quot;       </span></span>
<span id="cb272-7"><a href="factores.html#cb272-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [16] &quot;No aplica&quot;</span></span></code></pre></div>
<p>Una forma de colapsaros en menos categorías sería solo utilizar los tramos de 5000 dólares. Esto hace sentido si revisamos cómo se distribuyen los datos:</p>
<div class="sourceCode" id="cb273"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb273-1"><a href="factores.html#cb273-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(encuesta) <span class="sc">+</span></span>
<span id="cb273-2"><a href="factores.html#cb273-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">aes</span>(<span class="at">y =</span> ingreso) <span class="sc">+</span></span>
<span id="cb273-3"><a href="factores.html#cb273-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>()</span></code></pre></div>
<p><img src="15-factors_files/figure-html/unnamed-chunk-24-1.png" width="70%" style="display: block; margin: auto;" /></p>
<p>Para la agrupación, podemos utilizar <code>fct_collapse()</code></p>
<div class="sourceCode" id="cb274"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb274-1"><a href="factores.html#cb274-1" aria-hidden="true" tabindex="-1"></a>encuesta <span class="sc">%&gt;%</span> </span>
<span id="cb274-2"><a href="factores.html#cb274-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">ingreso_reagrupado =</span> <span class="fu">fct_collapse</span>(ingreso,</span>
<span id="cb274-3"><a href="factores.html#cb274-3" aria-hidden="true" tabindex="-1"></a>      <span class="st">&quot;Menos de 5000&quot;</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="st">&quot;Menos de 1000&quot;</span>, <span class="st">&quot;1000 - 2999&quot;</span>, <span class="st">&quot;3000 - 3999&quot;</span>, <span class="st">&quot;4000 - 4999&quot;</span>),</span>
<span id="cb274-4"><a href="factores.html#cb274-4" aria-hidden="true" tabindex="-1"></a>      <span class="st">&quot;5000 - 9999&quot;</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="st">&quot;5000 - 5999&quot;</span>, <span class="st">&quot;6000 - 6999&quot;</span>, <span class="st">&quot;7000 - 7999&quot;</span>, <span class="st">&quot;8000 - 9999&quot;</span>))) <span class="sc">%&gt;%</span> </span>
<span id="cb274-5"><a href="factores.html#cb274-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb274-6"><a href="factores.html#cb274-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">aes</span>(<span class="at">y =</span> ingreso_reagrupado) <span class="sc">+</span></span>
<span id="cb274-7"><a href="factores.html#cb274-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>()</span>
<span id="cb274-8"><a href="factores.html#cb274-8" aria-hidden="true" tabindex="-1"></a>  </span></code></pre></div>
<p><img src="15-factors_files/figure-html/unnamed-chunk-25-1.png" width="70%" style="display: block; margin: auto;" /></p>
<p>También podemos reagrupar “Sin respuesta”, “No sabe”, “Se niega a responder” y “No aplica” en una categoría a la que podríamos llamar “Desconocido” o “Sin información”. Editemos el código anterior para que refleje este cambio:</p>
<div class="sourceCode" id="cb275"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb275-1"><a href="factores.html#cb275-1" aria-hidden="true" tabindex="-1"></a>encuesta <span class="sc">%&gt;%</span> </span>
<span id="cb275-2"><a href="factores.html#cb275-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">ingreso_reagrupado =</span> <span class="fu">fct_collapse</span>(ingreso,</span>
<span id="cb275-3"><a href="factores.html#cb275-3" aria-hidden="true" tabindex="-1"></a>      <span class="st">&quot;Menos de 5000&quot;</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="st">&quot;Menos de 1000&quot;</span>, <span class="st">&quot;1000 - 2999&quot;</span>, <span class="st">&quot;3000 - 3999&quot;</span>, <span class="st">&quot;4000 - 4999&quot;</span>),</span>
<span id="cb275-4"><a href="factores.html#cb275-4" aria-hidden="true" tabindex="-1"></a>      <span class="st">&quot;5000 - 9999&quot;</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="st">&quot;5000 - 5999&quot;</span>, <span class="st">&quot;6000 - 6999&quot;</span>, <span class="st">&quot;7000 - 7999&quot;</span>, <span class="st">&quot;8000 - 9999&quot;</span>),</span>
<span id="cb275-5"><a href="factores.html#cb275-5" aria-hidden="true" tabindex="-1"></a>      <span class="st">&quot;Sin información&quot;</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="st">&quot;Sin respuesta&quot;</span>, <span class="st">&quot;No sabe&quot;</span>, <span class="st">&quot;Se niega a responder&quot;</span>, <span class="st">&quot;No aplica&quot;</span>)</span>
<span id="cb275-6"><a href="factores.html#cb275-6" aria-hidden="true" tabindex="-1"></a>      )) <span class="sc">%&gt;%</span> </span>
<span id="cb275-7"><a href="factores.html#cb275-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb275-8"><a href="factores.html#cb275-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">aes</span>(<span class="at">y =</span> ingreso_reagrupado) <span class="sc">+</span></span>
<span id="cb275-9"><a href="factores.html#cb275-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>()</span></code></pre></div>
<p><img src="15-factors_files/figure-html/unnamed-chunk-26-1.png" width="70%" style="display: block; margin: auto;" /></p>
</div>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="cadenas-de-caracteres.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="horas-y-fechas.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
